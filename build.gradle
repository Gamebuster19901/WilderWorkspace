plugins {
	id 'java-gradle-plugin'
	id 'eclipse'
	id 'maven-publish'
}

repositories {
    maven {
        url "https://maven.fabricmc.net"
    }
	mavenCentral()
	mavenLocal()
}

version = workspaceVersion
group = "com.wildermods"
archivesBaseName = "wilderworkspace"

sourceCompatibility = '17'
targetCompatibility = '17'

dependencies {
	implementation group: 'commons-io', name: 'commons-io', version: commonsIOVersion
	implementation group: 'org.apache.commons', name: 'commons-lang3', version: commonsLangVersion
	implementation group: 'org.apache.commons', name: 'commons-text', version: commonsTextVersion
	implementation group: 'org.vineflower', name: 'vineflower', version: vineFlowerVersion
}

import org.apache.tools.ant.filters.ReplaceTokens

task processSource(type: Sync) {
	from sourceSets.main.java
	inputs.property 'workspaceVersion', workspaceVersion
	
	filter(ReplaceTokens, tokens: [
		workspaceVersion: workspaceVersion
	])
	into "$buildDir/src"
	
}

compileJava {
	source = processSource.outputs
}

publishing {
	publications {
		maven(MavenPublication) {
			groupId = "com.wildermods"
			artifactId = "wilderworkspace"
			version = workspaceVersion
		}
	}
}